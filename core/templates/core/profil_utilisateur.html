{% extends 'core/base.html' %}
{% block title %}Mon profil | 2N CORPORATE{% endblock %}
{% block content %}
<div style="display:flex;justify-content:center;align-items:center;min-height:70vh;">
  <div class="container" style="max-width:420px;width:100%;background:#fff;border-radius:20px;box-shadow:0 8px 32px rgba(102,126,234,0.10);padding:2.5rem 2rem 2rem 2rem;">
    <h1 style="font-size:2rem;margin-bottom:1.5rem;text-align:center;color:#667eea;font-weight:700;"><i class="fas fa-user"></i> Mon profil</h1>
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-success" style="text-align:center;border-radius:8px;">{{ message }}</div>
      {% endfor %}
    {% endif %}
    <div class="profile-pic" style="display:flex;flex-direction:column;align-items:center;margin-bottom:2rem;position:relative;width:120px;margin-left:auto;margin-right:auto;">
      {% if user.photo %}
        <img src="{{ user.photo.url }}" alt="Photo de profil" style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #667eea;box-shadow:0 2px 12px rgba(102,126,234,0.10);">
      {% else %}
        <img src="https://ui-avatars.com/api/?name={{ user.username }}&background=667eea&color=fff" alt="Avatar" style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #667eea;box-shadow:0 2px 12px rgba(102,126,234,0.10);">
      {% endif %}
      <!-- Icône appareil photo en bas à droite sur la photo -->
      <form method="post" enctype="multipart/form-data" style="position:absolute;right:8px;bottom:18px;z-index:2;">
        {% csrf_token %}
        <label for="id_photo" style="cursor:pointer;background:#fff;border-radius:50%;padding:8px;box-shadow:0 2px 8px rgba(102,126,234,0.15);border:1px solid #eee;display:flex;align-items:center;justify-content:center;transition:box-shadow 0.2s;">
          <i class="fas fa-camera"></i>
          <input type="file" name="photo" id="id_photo" style="display:none;" onchange="this.form.submit();">
        </label>
        {% if user.photo %}
          <button type="submit" name="supprimer_photo" class="btn btn-sm btn-danger" style="margin-left:10px;vertical-align:middle;">
            <i class="fas fa-trash"></i>
          </button>
        {% endif %}
        <input type="hidden" name="modifier_profil" value="1">
      </form>
    </div>
    <div style="text-align:center;margin-bottom:1.5rem;">
      <span style="font-weight:600;font-size:1.1rem;color:#764ba2;letter-spacing:0.5px;">{{ user.get_role_display }}</span>
    </div>
    <form method="post" enctype="multipart/form-data" style="margin-top:1.5rem;">
      {% csrf_token %}
      <input type="hidden" name="modifier_profil" value="1">
      <div class="form-group" style="margin-bottom:1.2rem;">
        <label class="form-label" for="id_username" style="font-weight:600;color:#333;margin-bottom:0.3rem;">Nom d'utilisateur</label>
        {{ form.username }}
      </div>
      <div class="form-group" style="margin-bottom:1.2rem;">
        <label class="form-label" for="id_email" style="font-weight:600;color:#333;margin-bottom:0.3rem;">Adresse email</label>
        {{ form.email }}
      </div>
      <div class="form-group" style="margin-bottom:1.2rem;">
        <label class="form-label" for="id_telephone" style="font-weight:600;color:#333;margin-bottom:0.3rem;">Téléphone</label>
        {{ form.telephone }}
      </div>
      <button type="submit" class="btn btn-primary" style="width:100%;padding:0.9rem 0;font-size:1.1rem;border-radius:10px;background:linear-gradient(135deg,#667eea,#764ba2);font-weight:700;letter-spacing:0.5px;">
        <i class="fas fa-save"></i> Enregistrer les modifications
      </button>
    </form>
  </div>
</div>
{% endblock %} 